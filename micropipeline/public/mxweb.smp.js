var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};
$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,c,d){$jscomp.initSymbolIterator();c=null!=c?c:function(a){return a};var b=[],f=a[Symbol.iterator];if("function"==typeof f)for(a=f.call(a);!(f=a.next()).done;)b.push(c.call(d,f.value));else{f=a.length;for(var g=0;g<f;g++)b.push(c.call(d,a[g]))}return b}},"es6","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var g=0;g<f&&c<e;)if(b[c++]!=a[g++])return!1;return g>=f}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(a){$jscomp.owns(a,d)||$jscomp.defineProperty(a,d,{value:{}})}function c(a){var c=Object[a];c&&(Object[a]=function(a){b(a);return c(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(h){return!1}}())return a;var d="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var e=0,f=function(a){this.id_=(e+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};f.prototype.set=function(a,c){b(a);if(!$jscomp.owns(a,d))throw Error("WeakMap key fail: "+a);a[d][this.id_]=c;return this};f.prototype.get=function(a){return $jscomp.owns(a,d)?a[d][this.id_]:void 0};f.prototype.has=function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)};f.prototype.delete=
function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)?delete a[d][this.id_]:!1};return f},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(k){return!1}}())return a;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var b=new WeakMap,c=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};c.prototype.delete=
function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};c.prototype.has=function(a){return!!d(this,a).entry};c.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};c.prototype.entries=function(){return e(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return e(this,function(a){return a.key})};c.prototype.values=function(){return e(this,function(a){return a.value})};c.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var d=function(a,c){var d=c&&typeof c;"object"==d||"function"==d?b.has(c)?d=b.get(c):(d=""+ ++g,b.set(c,d)):d="p_"+c;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var f=
e[a];if(c!==c&&f.key!==f.key||c===f.key)return{id:d,list:e,index:a,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},e=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=a.next=a.head=a},g=0;return c},"es6","es3");
$jscomp.polyfill("Set",function(a){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([b]));if(!d.has(b)||1!=d.size||d.add(b)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=b||f.value[1]!=b)return!1;f=e.next();return f.done||f.value[0]==b||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:e.next().done}catch(g){return!1}}())return a;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};b.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};b.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};b.prototype.clear=function(){this.map_.clear();this.size=0};b.prototype.has=function(a){return this.map_.has(a)};b.prototype.entries=function(){return this.map_.entries()};
b.prototype.values=function(){return this.map_.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.map_.forEach(function(d){return a.call(b,d,d,c)})};return b},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).i}},"es6","es3");
$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var f in e)$jscomp.owns(e,f)&&(a[f]=e[f])}return a}},"es6","es3");function clg(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];console.log(Array.from(b).join(","))}window.clg=clg;function ast(a,b){console.assert(a,void 0===b?"anon":b)}window.ast=ast;function find(a,b){if(-1!==b.indexOf(a))return a}
function eko(a,b){console.log("eko <"+a+"> = "+b.toString());return b}function xor(a,b){return a?!b:b}window.xor=xor;function uuidv4(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(a){return(a^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})}window.uuidv4=uuidv4;
function localStorageLoad(a){var b=Object.keys(window.localStorage||{}),c=[],d=b.length;for(clg("lsl sees keys"+b);d--;)b[d].startsWith(a)&&c.push(JSON.parse(window.localStorage.getItem(b[d])||""));return c}function isString(a){return"string"===typeof a}Storage.prototype.setObject=function(a,b){this.setItem(a,JSON.stringify(b))};Storage.prototype.getObject=function(a){return(a=this.getItem(a))&&JSON.parse(a)};var MISSING={},QUEUE_COMPACT_SIZE=500;
function define(a,b){for(var c in b){var d=Object.getOwnPropertyDescriptor(b,c);d.enumerable=!1;Object.defineProperty(a,c,d)}}var ArrayQueue=function(){this._head=this.size=0;this._items=[]};ArrayQueue.prototype.emptyp=function(){return 0===this.size};ArrayQueue.prototype.push=function(a){this._items.push(a);return++this.size};
ArrayQueue.prototype.shift=function(){if(this.size){var a=this._items[this._head];this._head===QUEUE_COMPACT_SIZE?(this._items=this._items.slice(this._head+1),this._head=0,this.size--):this._items[this._head++]=MISSING;return a}};ArrayQueue.prototype.clear=function(){this._head=this.size=0;this._items.length=0};ArrayQueue.prototype.forEach=function(a,b){if(this.size)for(var c=this._head,d=0;c<this._items.length;c++){var e=this._items[c];e!==MISSING&&a.call(b,e,d++,this)}};
var Stack=function(){var a=function(){var a=[];return[function(){return a.push.apply(a,arguments)},function(){return a.pop.apply(a,arguments)},function(){return a.length},function(b){return a.length=b},function(){return a[a.length-1]},function(b){return a.includes(b)},function(){return a}]}();this.push=a[0];this.pop=a[1];this.getLength=a[2];this.setLength=a[3];this.peek=a[4];this.includes=a[5];this.elts=a[6];this.push.apply(this,arguments)};
Array.prototype.somex=function(a){for(var b=$jscomp.makeIterator(this.entries()),c=b.next();!c.done;c=b.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;if(c=a(c,d))return c}return null};var causation=new Stack,callStack=new Stack,depender=null,gNotToBe=!1,gCPropDepth=0,gCDebug=!1,gStop=!1,ppulse=0;function gpulse(){return ppulse}var gPar=null,onePulsep=!1,dpLogp=!1;
function dataPulseNext(a){onePulsep||(dpLogp&&clg("dpnext "+(void 0===a?"anon":a)),ppulse+=1);return ppulse}function cellsReset(a){a=void 0===a?{}:a;gCDebug=a.debug;clientQHandler=a.clientQHandler;cellsInit()}function cellsInit(){ppulse=0}var deferChanges=!1,clientQHandler=null,gCustomPropagator=null,gWithinIntegrity=!1,gSlotObserver={};function gSlotObserverDef(a,b){gSlotObserver[a]&&clg("gSlotObserverDef overwriting $(slot) observer");gSlotObserver[a]=b}var qNotify=new ArrayQueue,qAwaken=new ArrayQueue;
window.qAwaken=qAwaken;var qClient=new ArrayQueue,qEphemReset=new ArrayQueue,qChange=new ArrayQueue;function ufbAdd(a,b){a.push(b)}function withoutCDependency(a){return function(b){var c=depender;depender=null;try{return a(b)}finally{depender=c}}}function withoutIntegrity(a){var b=gWithinIntegrity,c=deferChanges;try{deferChanges=gWithinIntegrity=!1,a()}finally{gWithinIntegrity=b,deferChanges=c}}
function withIntegrity(a,b,c){if(!gStop)if(gWithinIntegrity){if(a)return ufbAdd(a,[b,c]),"deferred-to-ufb";c(a,b)}else{var d=gWithinIntegrity,e=deferChanges;gWithinIntegrity=!0;deferChanges=!1;try{gpulse()&&a!==qChange||dataPulseNext("cwi");var f=c(a,b);finBiz(qNotify);return f}finally{gWithinIntegrity=d,deferChanges=e}}}window.withIntegrity=withIntegrity;function withChg(a,b){withIntegrity(qChange,a,b)}window.withChg=withChg;
function finBiz(a){for(;a;)switch(a){case qNotify:qDo("notify",a);qDo("awaken",qAwaken);a=qNotify.emptyp()?qClient:qNotify;break;case qClient:(clientQHandler||qDo)("client",a);a=qClient.emptyp()?qEphemReset:qClient;break;case qEphemReset:qDo("reset empheral",a);a=qChange;break;case qChange:if(a=a.shift()){var b=$jscomp.makeIterator(a);a=b.next().value;b=b.next().value;dataPulseNext("change");b("change",a);a=qNotify}else a=null;break;default:throw"finBiz sees invalid q: "+a.toString();}}
function qDo(a,b){b.forEach(function(b){var c=$jscomp.makeIterator(b);b=c.next().value;c=c.next().value;c(a,b)});b.clear()}$jscomp.initSymbol();
var kUnbound=Symbol("unbound"),kUncurrent="uncurrent",kValid="valid",kAwake="c-awake",kQuiesced="c-quiesced",kNascent="nascent",kOptimizedAwayp="optimized-away",kOptimizeWhenValued="optimize-when-valued",kOnceAsked="lazy-once-asked",kUntilAsked="lazy-until-asked",kAlways="lazy-always",kObserverUnresolved="kObserverUnresolved",Cell=function(a,b,c,d,e,f,g){g=void 0===g?!c:g;this.name=void 0===f?"anon":f;this.md=null;this.pulseObserved=this.pulseLastChanged=this.pulse=-1;this.lazy=null;this.callers=
new Set;this.useds=new Set;this.ephemeralp=d;this.inputp=c;this.observer=e;this.optimize=g;this.synapticp=this.slotOwning=!1;b?(this.rule=b,this.pv=kUnbound,this.state=kNascent,this.others={}):(this.pv=a,this.state=kValid);Object.defineProperty(this,"v",{enumerable:!0,get:this.slotValue,set:this.slotValueSet})};Cell.prototype.mx=function(){return this.md};Cell.prototype.optimizedAwayp=function(){return this.state===kOptimizedAwayp};Cell.prototype.unboundp=function(){return this.pv===kUnbound};
Cell.prototype.uncurrentp=function(){return this.pv===kUncurrent};Cell.prototype.validp=function(){return!(this.unboundp()||this.uncurrentp())};Cell.prototype.valueState=function(){return this.unboundp()?kUnbound:this.uncurrentp()?kUncurrent:kValid};Cell.prototype.valueChangedp=function(a,b){return a!==b};Cell.prototype.currentp=function(){return this.pulse>=gpulse()};Cell.prototype.pulseUpdate=function(a){this.optimizedAwayp()||(ast(gpulse()>=this.pulse),this.pulse=gpulse())};
Cell.prototype.awaken=function(){this.rule?this.currentp()||this.calcNSet("c-awaken"):gpulse()>this.pulseObserved&&(this.observe(kUnbound,"awaken"),this.ephemeralReset())};Cell.prototype.slotValue=function(){var a=void 0,b=this;withIntegrity(null,null,function(){var c=b.pv;a=b.ensureValueIsCurrent("c-read",null);!b.md&&b.state===kNascent&&gpulse()>b.pulseObserved&&(b.state=kAwake,b.observe(c,"cget"),b.ephemeralReset())});depender&&depender.recordDependency(this);return a};
Cell.prototype.slotValueSet=function(a){var b=this;if(deferChanges)throw"Assign to "+this.name+" must be deferred by wrapping it in WITH-INTEGRITY";find(this.lazy,[kOnceAsked,kAlways,!0])?this.valueAssume(a,null):withChg(this.name,function(){b.valueAssume(a,null)})};Cell.prototype.recordDependency=function(a){a.optimizedAwayp()||(this.useds.add(a),ast(0<this.useds.size),a.callerEnsure(this))};Cell.prototype.callerEnsure=function(a){this.callers.add(a)};Cell.prototype.callerDrop=function(a){this.callers.delete(a)};
Cell.prototype.ensureValueIsCurrent=function(a,b){if(gNotToBe)return this.validp()?this.pv:null;if(this.currentp())return this.pv;if(!this.inputp||!this.validp()||this.rule&&this.optimize===kOptimizeWhenValued&&null===this.pv){if(this.md&&this.md.mDeadp())throw"evic: read of dead "+this.name+" of "+this.md.name;a=!1;if(this.validp())for(var c=$jscomp.makeIterator(this.useds.values()),d=c.next();!d.done;d=c.next()){if(d=d.value,d.ensureValueIsCurrent("nested",this),d.pulseLastChanged>this.pulse){a=
!0;break}}else a=!0;a?this.currentp()||this.calcNSet("evic",b):this.pulseUpdate("valid-uninfluence")}return this.pv};Cell.prototype.calcNSet=function(a,b){if(callStack.includes(this)){callStack.elts();clg("cyclic dependency: about to calculate "+this.name+" already calculating");debugger}a=this.calcNLink();clbug(this,"rawval",a);if(!this.optimizedAwayp())return clbug(this,"assuming ",a,this.useds.size),this.valueAssume(a,null)};
Cell.prototype.calcNLink=function(){var a=depender,b=deferChanges;depender=this;deferChanges=!0;try{return callStack.push(this),this.unlinkFromUsed("pre-rule-clear"),this.rule(this)}finally{callStack.pop(),depender=a,deferChanges=b}};
Cell.prototype.valueAssume=function(a,b){var c=this,d=this;withoutCDependency(function(){var e=d.pv,f=d.valueState();d.pv=a;d.state=kAwake;d.md&&!d.synapticp&&mdSlotValueStore(d.md,d.name,a);d.pulseUpdate("sv-assume");if("propagate"===b||-1===[kValid,kUncurrent].indexOf(f)||d.valueChangedp(a,e))f=d.rule?d.optimize:null,f===kOptimizeWhenValued?d.pv&&(d.unlinkFromUsed("opti-when"),c.optimizeAwayMaybe(e)):f&&d.optimizeAwayMaybe(e),"no-propagate"===b||d.optimizedAwayp()||d.propagate(e,d.callers)})();
return a};Cell.prototype.propagate=function(a,b){if(onePulsep)gCustomPropagator&&gCustomPropagator(this,a);else{this.pulseLastChanged=gpulse();var c=depender,d=callStack,e=gCPropDepth,f=deferChanges;try{this.propagateToCallers(b),(gpulse()>this.pulseObserved||find(this.lazy,[kOnceAsked,kAlways,!0]))&&this.observe(a,"propagate"),this.ephemeralReset()}finally{depender=c,callStack=d,gCPropDepth=e,deferChanges=f}}};
Cell.prototype.propagateToCallers=function(a){if(a.size){var b=this;withIntegrity(qNotify,b,function(){causation.push(b);try{for(var c=$jscomp.makeIterator(a.values()),d=c.next();!d.done;d=c.next()){var e=d.value;e.state===kQuiesced||e.currentp()||find(e.lazy,[!0,kAlways,kOnceAsked])||!e.useds.has(b)||e.calcNSet("propagate")}}finally{causation.pop()}})}};
Cell.prototype.observerResolve=function(){!this.observer&&this.md&&(this.observer=this.md.slotObserverResolve(this.name));return this.observer===kObserverUnresolved?null:this.observer};Cell.prototype.observe=function(a,b){(b=this.observerResolve())&&b(this.name,this.md,this.pv,a,this)};Cell.prototype.ephemeralReset=function(){if(this.ephemeralp){var a=this;withIntegrity(qEphemReset,this,function(){a.pv=null})}};
Cell.prototype.unlinkFromUsed=function(a){a=$jscomp.makeIterator(this.useds.values());for(var b=a.next();!b.done;b=a.next())b.value.callerDrop(this);this.useds.clear()};Cell.prototype.mdCellFlush=function(){};
Cell.prototype.optimizeAwayMaybe=function(a){if(this.rule&&!this.useds.size&&this.optimize&&!this.optimizedAwayp()&&this.validp()&&!this.synapticp&&!this.inputp){this.state=kOptimizedAwayp;this.observe(a,"optimized-away");this.md&&this.mdCellFlush();a=$jscomp.makeIterator(this.callers.values());for(var b=a.next();!b.done;b=a.next())b=b.value,this.callerDrop(b),b.ensureValueIsCurrent("opti-used",this)}};Cell.prototype.quiesce=function(){this.unlinkFromCallers();this.unlinkFromUsed("quiesce")};
Cell.prototype.unlinkFromCallers=function(){this.state=kUncurrent;for(var a=$jscomp.makeIterator(this.callers.values()),b=a.next();!b.done;b=a.next())this.callerDrop(b.value);this.callers.clear()};Cell.prototype.kidValuesKids=function(){var a=this,b=a.md,c=a.pv===kUnbound?[]:a.pv;return b.kidValues.map(function(d){var e=c.findIndex(function(b){return a.md.kidKey(b)===d});return-1===e?b.kidFactory(a,d):c[e]})};
Cell.prototype.fm=function(a,b,c){if(a){if(!this.md)throw"Family search attempted from Cell "+this+" lacking md (s/b a Model)";return this.md.fm(a,b,c)}};Cell.prototype.fmUp=function(a,b,c){if(!this.md)throw"fmUp search attempted from Cell "+this+" lacking md (s/b a Model)";return this.md.fmUp(a,b,c)};Cell.prototype.fmDown=function(a,b,c){if(!this.md)throw"fmDown search attempted from Cell "+this+" lacking md (s/b a Model)";return this.md.fmDown(a,c,b)};window.Cell=Cell;Cell.prototype.mx=Cell.prototype.mx;
function mdSlotValueStore(a,b,c){}function clbug(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];a.bug&&console.log("clbug> "+a.name+":"+a.useds.size+":"+Array.from(c).join(","))}function cF(a,b){return Object.assign(new Cell(null,a,!1,!1,null),b)}window.cF=cF;function cF1(a,b){return Object.assign(new Cell(null,function(b){return withoutCDependency(a)(b)},!1,!1,null),b)}function cF_(a,b){return Object.assign(new Cell(null,a,!1,!1,null),{lazy:!0},b)}
function c_F(a,b){return Object.assign(new Cell(null,a,!1,!1,null),{lazy:kUntilAsked},b)}function cFI(a,b){return Object.assign(new Cell(null,a,!0,!1,null),b)}window.cFI=cFI;function cI(a,b){return Object.assign(new Cell(a,null,!0,!1,null),b)}window.cI=cI;function cIe(a,b){return Object.assign(new Cell(a,null,!0,!0,null),b)}function obsDbg(a,b,c,d,e){console.log("obsDbg! "+a+" "+(b?b.name||b.id:"noMd")+" useds="+e.useds.size+" new="+c+" prior="+(d===kUnbound?"unbound":d))}
function XobsDbg(a,b,c,d,e){};function allArgs(a){return Array.apply(null,a).slice(0)}window.allArgs=allArgs;function cdrArgs(a){return Array.apply(null,a).slice(1)}window.cdrArgs=cdrArgs;function cddrArgs(a){return Array.apply(null,a).slice(2)}window.cddrArgs=cddrArgs;var kAwakening="md-awakening",kDoomed="md-doomed",kDead="md-dead",sid=0;window.sid=sid;
var Model=function(a,b,c,d){var e=this;d=void 0===d?!0:d;this.par=a||gPar;this.sid=++sid;this.name=b;this.kids=this.mdType=null;this.cells={};this.slotObservers=[];this.others={};this.state=kNascent;this.awakenOnInitp=this.doomed=!1;this.adoptCt=0;a={};for(var f in c)a.slot=f,c.hasOwnProperty(a.slot)?(a.value=c[a.slot],a.value instanceof Cell?(a.value.name=a.slot,a.value.md=this,this.cells[a.slot]=a.value,Object.defineProperty(this,a.slot,{enumerable:!0,get:function(a){return function(){return a.value.slotValue()}}(a),
set:function(a){return function(b){return a.value.slotValueSet(b)}}(a)})):Object.defineProperty(this,a.slot,{enumerable:!0,get:function(a){return function(){return a.value}}(a),set:function(a){return function(c){debugger;throw"Slot "+a.slot+" of "+b+" cannot be set to "+c+" because it is not mediated by an input Cell";}}(a)}),a={value:a.value,slot:a.slot}):clg("DBG: yep, islot not hasown ",a.slot);d&&(this.awakenOnInitp?this.awaken():withIntegrity(qAwaken,this,function(a){e.awaken()}))};
Model.cname=function(){return"Model"};Model.prototype.dbg=function(){return"MD "+this.mdType+":"+(this.name||this.sid)};Model.prototype.awaken=function(){if(this.state!==kNascent)return this;this.state=kAwakening;for(var a in this.cells){var b=this.cells[a];console.assert(b.md,"No md for cell "+b.name+" at md awaken");find(b.lazy,[!0,kAlways,kUntilAsked])||b.awaken()}this.state=kAwake};Model.prototype.slotObserverResolve=function(a){return null};
Model.prototype.fmd=function(a,b,c){return this.fm(a,Object.assign({mep:!1,upp:!1,insidep:!0},c),b)};Model.prototype.fm=function(a,b,c){var d=null;if(c){var e=this.others[c];if(e)return e}b=Object.assign({mep:!1,mustp:!0,insidep:!1,upp:!0,wocd:!0},b);e=depender;depender=b.wocd?null:depender;try{var f=this.fmTv(a,b);if(f)d=this.others[c]=f;else if(b.mustp)throw"fget failed what = "+a.toString()+", id "+this.id+", where = "+this.name;}finally{depender=e}return d};
Model.prototype.fmUp=function(a,b,c){return this.fm(a,Object.assign({upp:!0,mep:!1},b),c)};Model.prototype.fmDown=function(a,b,c){return this.fm(a,Object.assign({upp:!1,insidep:!0,mep:!1},b),c)};Model.prototype.fmatch=function(a){return"function"===typeof a&&a(this)||"string"===typeof a&&this.name===a||this===a?this:null};
Model.prototype.fmTv=function(a,b){return b.mep&&this.fmatch(a)||b.insidep&&this.kids&&this.kids.somex(function(c,d){if(c=d!==b.skip&&d.fmTv(a,Object.assign({},b,{upp:!1,mep:!0})))return c})||b.upp&&this.par&&this.par.fmTv(a,Object.assign({},b,{mep:!0,insidep:!0,skip:this}))};Model.prototype.mDeadp=function(){return this.state===kDead};window.Model=Model;Model.prototype.awaken=Model.prototype.awaken;var isModel=function(a){return a instanceof Model};
function mkm(a,b,c,d,e){e=void 0===e?"Model":e;c=Object.assign({},c,d?{kids:cKids(d)}:null);a=new window[e](a,b,c);if(!isModel(a))throw"mkm made not-modelp";return a}window.mkm=mkm;function pkdFlat(a,b){b=void 0===b?[]:b;for(var c=0;c<a.length;++c)null!=a[c]&&(a[c]instanceof Array?pkdFlat(a[c],b):b.push(a[c]));return b}
function cKids(a,b){b=void 0===b?{}:b;return Object.assign(new Cell(null,function(b){if(!isModel(b.md))throw"ckids c.md not model";b=kfExpand(b,a);return b instanceof Array?pkdFlat(b):[b]},!1,!1,null),b)}window.cKids=cKids;var kfExpandFinal=function(a){return null===a||isString(a)||isModel(a)||a instanceof Array&&a.every(kfExpandFinal)};
function kfExpand(a,b){if(kfExpandFinal(b))return b;if("function"===typeof b)return kfExpand(a,b(a));if(b instanceof Array)return kfExpand(a,b.map(function(b){return kfExpand(a,b)}));clg("expand bad kf",b,null===b,typeof b);debugger};var mxDom=[],domLogging=!1;window.domLogging=domLogging;function domlog(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];domLogging&&console.log("domlog> ",Array.from(b).join(","))}function dom2mx(a,b){var c=mxDom[a.id];if(!c&&(void 0===b||b))throw"dom2mx cannot find mxDom for with dom.sid "+a.sid+", dom.id "+a.id;return c}function obsContent(a,b,c,d,e){d!==kUnbound&&(ast(b.dom,"Tag obs Content"),domlog("content",c,d),b.dom.innerHTML=c)}
function notToBe(a){a.state=kDoomed;if(a.kids)for(var b=$jscomp.makeIterator(a.kids),c=b.next();!c.done;c=b.next())notToBe(c.value);for(var d in a.cells)a.cells[d].quiesce();a.state=kDead}
function obsKids(a,b,c,d,e){if(d!==kUnbound){a=b.dom;b=document.createDocumentFragment();ast(a);e=$jscomp.makeIterator(d);for(var f=e.next();!f.done;f=e.next())f=f.value,find(f,c)||(domlog("dropping DOM",f.tag),notToBe(f));c=$jscomp.makeIterator(c);for(e=c.next();!e.done;e=c.next())e=e.value,find(e,d)?b.appendChild(a.removeChild(e.dom)):(f=document.createElement("div"),domlog("building new DOM",e.tag),f.innerHTML=Tag.toHTML(e),e=e.domCache=f.removeChild(f.firstChild),b.appendChild(e));a.innerHTML=
null;a.appendChild(b)}}function obsDisabled(a,b,c,d,e){d!==kUnbound&&(domlog("disabled",c,d),b.dom.disabled=!!c)}function obsHidden(a,b,c,d,e){d!==kUnbound&&(c?b.dom.setAttribute("hidden",""):b.dom.removeAttribute("hidden"))}function obsClass(a,b,c,d,e){d!==kUnbound&&(domlog("className",c,d),b.dom.className=c?isString(c)?c:c.join(" "):"")}function obsStyleProperty(a,b,c,d,e){d!==kUnbound&&(a=a.replace("_","-"),domlog("attr global",a,c,d),b.tag.dom.style[a]=c)}
function obsTagEventHandler(a,b,c,d,e){d!==kUnbound&&(b.dom[a]=c)}var AttrAliases=new Map([["class","className"]]);function obsAttrGlobal(a,b,c,d,e){d!==kUnbound&&(e=AttrAliases.get(a)||a,domlog("attr global",a,c,d),b.dom[e]=c)}function obsStyleAttr(a,b,c,d,e){d!==kUnbound&&(a=tagStyleString(b),""!==a&&(b.dom.style=a))}var TagSession=function(a,b,c){var d=Object.assign({sid:++sid},c);Model.call(this,a,b||c.name,d,!1)};$jscomp.inherits(TagSession,Model);
TagSession.make=function(a,b,c){a=new TagSession(a,b,c);a.awakenOnInitp?a.awaken():withIntegrity(qAwaken,a,function(a){clg("awakening tag session!!!",a.name);a.awaken();return null})};TagSession.cname=function(){return"TagSession"};TagSession.prototype.init=function(){Router(this.routes).init()};window.TagSession=TagSession;
var Tag=function(a,b,c,d){var e=Object.assign({},c,d);delete e.id;Model.call(this,a,b||d.name,e,!1);var f=this;this.sid=++sid;if(void 0===c)debugger;this.id=c.id?c.id:c.id=this.sid;this.callbacks=new Map;this.attrKeys=[];for(var g in c)this.attrKeys.push(g);mxDom[this.id]=this;this.domCache=null;Object.defineProperty(this,"dom",{enumerable:!0,get:function(){if(null===f.domCache&&(f.domCache=document.getElementById(f.id),ast(f.domCache,"Unable to locate DOM for Tag via Tag.id "+f.id),!f.domCache))throw clg("no dom",
b),"Tag unanble find DOM";return f.domCache}});this.awakenOnInitp?this.awaken():withIntegrity(qAwaken,this,function(a){f.awaken()})};$jscomp.inherits(Tag,Model);Tag.prototype.dbg=function(){return"tag "+this.tag+" nm="+this.name+" id="+this.id+" "};Tag.cname=function(){return"Tag"};Tag.isTagKid=function(a){return isString(a)||a instanceof Function||a instanceof Array};
Tag.prototype.tagToHTML=function(){var a=this.tag,b=tagAttrsBuild(this),c=tagStyleBuild(this);b="id="+this.id+" "+b+" "+c;ast(a);return"<"+a+" "+b+">"+(this.content||this.kidsToHTML())+"</"+a+">"};Tag.toHTML=function(a){return isString(a)?a:Array.isArray(a)?a.reduce(function(a,c){return a+Tag.toHTML(c)},""):"function"===typeof a?a().tagToHTML():a.tagToHTML()};Tag.prototype.kidsToHTML=function(){return this.kids?this.kids.reduce(function(a,b){return a+Tag.toHTML(b)},""):""};
Tag.prototype.slotObserverResolve=function(a){var b=this.slotObservers[a];b||(b="content"===a?obsContent:"kids"===a?obsKids:"disabled"===a?obsDisabled:"hidden"===a?obsHidden:"class"===a?obsClass:"style"===a?obsStyleAttr:TagEvents.has(a)?obsTagEventHandler:TagAttributesGlobal.has(a)?obsAttrGlobal:kObserverUnresolved,this.slotObservers[a]=b);return b};Tag.prototype.fmTag=function(a,b){return this.fmUp(function(b){return b.tag===a},{},b)};window.Tag=Tag;function tag2html(a){return Tag.toHTML(a)}
window.tag2html=tag2html;var isTag=function(a){return a instanceof Tag},TagAttributesGlobal=new Set("accesskey autofocus checked class content contenteditable contextmenu dir draggable dropzone for hidden href id itemid itemprop itemref itemscope itemtype lang spellcheck src style tabindex title translate type viewBox fill d".split(" ")),TagEvents=new Set("onabort onautocomplete onautocompleteerror onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragexit ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onresize onscroll onseeked onseeking onselect onshow onsort onstalled onsubmit onsuspend ontimeupdate ontoggle onvolumechange onwaiting".split(" "));
function tagEventHandler(a,b){var c=dom2mx(a.target);c.callbacks.get(b)(c,a,b)}
function tagAttrsBuild(a){var b="";a.attrKeys.forEach(function(c){if(TagEvents.has(c))a[c]instanceof Function||(clg("bingo event!!!!!!!!!! "+c),clg("bingo event handler!!!!!!!!!! "+a[c])),ast(a[c]instanceof Function,"tagattrsbuild handler not fn"),a.callbacks.set(c,a[c]),b+=" "+c+"=\"tagEventHandler(event, '"+c+"')\"";else switch(c){case "disabled":case "autofocus":case "hidden":case "checked":a[c]&&(b+=" "+c);break;case "value":b+=" "+c+'="'+a[c]+'"';break;case "placeholder":b+=" "+c+'="'+a[c]+'"';
break;case "style":b+=tagStyleBuild(a);break;case "class":a[c]&&(b+=' class="'+(isString(a[c])?a[c]:a[c].filter(function(a){return null!==a&&void 0!==a}).join(" "))+'"');break;default:a[c]&&(TagAttributesGlobal.has(c)?b+=" "+c+'="'+a[c]+'"':clg("unknown attribute prop",c))}});return b}
function tag(a,b,c,d){if(1===d.length&&isString(d[0])){if(b.content)throw"tag "+a+"has one string child "+d[0]+" but also content "+b.content;b.content=d[0];d=null}if(c)for(var e in b||{})c.hasOwnProperty(e)&&clg("WARNING: duplicate key "+e+" in tag "+a);if(b)for(var f in c||{})b.hasOwnProperty(f)&&clg("WARNING: duplicate key "+f+" in tag "+a);return function(e){var f=c||{},g=Object.assign({},{tag:a},d?{kids:cKids(d)}:null,f);return new Tag(e?e.md:null,f.name||a,b,g)}}
function genTagEx(a){window[a]=function(){return Tag.isTagKid(arguments[0])?tag(a,{},{},allArgs(arguments)):Tag.isTagKid(arguments[1])?tag(a,arguments[0],{},cdrArgs(arguments)):tag(a,arguments[0],arguments[1],cddrArgs(arguments))}}"a abbr acronym address applet area article aside audio b base basefont bdi bdo bgsound big blink blockquote body br button canvas caption center cite code col colgroup command content data datalist dd del details dfn dialog dir div dl dt element em embed fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe image img input ins isindex kbd keygen label legend li link listing main map mark marquee menu menuitem meta meter multicol nav nextid nobr noembed noframes noscript object ol optgroup option output p param path picture plaintext pre progress q rp rt rtc ruby s samp script section select shadow slot small source spacer span strike strong style sub summary sup svg table tbody td template textarea tfoot th thead time title tr track tt u ul var video wbr xmp".split(" ").map(function(a){return genTagEx(a)});
var mxCSS=function(a,b){var c=Object.assign({},b);Model.call(this,null,"css",c,!1);var d=this;this.cssProps=[];for(var e in b)this.cssProps.push(e);clg("cssProps!!!!",this.cssProps);this.sid=++sid;this.tag=a;this.slotObservers=[];withIntegrity(qAwaken,this,function(a){return d.awaken()})};$jscomp.inherits(mxCSS,Model);mxCSS.prototype.dbg=function(){return"mxCSS "+this.tag.tag+" tagnm="+this.tag.name};mxCSS.cname=function(){return"mxCSS"};mxCSS.prototype.slotObserverResolve=function(a){return obsStyleProperty};
function mkCSS(a){return function(b){return new mxCSS(b,a)}}function tagStyleBuild(a){var b="",c=a.style;c instanceof Function&&(c=c(a));if(isString(c))b=c;else if(c instanceof mxCSS)c.cssProps.forEach(function(a){var d=a.replace("_","-");b+=d+":"+c[a]+";"});else for(var d in c)a=d.replace("_","-"),b+=a+":"+c[d]+";";return""===b?"":' style="'+b+'"'}
function tagStyleString(a){var b="",c=a.style;c instanceof Function&&(c=c(a));if(isString(c))b=c;else if(c instanceof mxCSS)c.cssProps.forEach(function(a){var d=a.replace("_","-");b+=d+":"+c[a]+";"});else for(var d in c)a=d.replace("_","-"),b+=a+":"+c[d]+";";return b}var MXStorable=function(a){a=a||{};a=Object.assign({id:(a.lsPrefix||"MXSTOR_ANON")+uuidv4(),created:Date.now()},a,{deleted:a.deleted||cI(null)});Model.call(this,null,null,a,!1);this.store()};$jscomp.inherits(MXStorable,Model);
MXStorable.cname=Model.cname;MXStorable.storableProperties=function(){return["id","created","deleted"]};MXStorable.prototype.toJSON=function(){var a=this;return this.constructor.storableProperties().reduce(function(b,c){b[c]=a[c];return b},{})};MXStorable.load=function(a,b){b=window.localStorage.getObject(b);return new a(b)};MXStorable.obsAnyChange=function(a,b,c,d,e){b.store()};MXStorable.prototype.slotObserverResolve=function(a){return MXStorable.obsAnyChange};
MXStorable.prototype.store=function(){MXStorable.storeObject(this.id,this.toJSON())};MXStorable.storeObject=function(a,b){window.localStorage.setObject(a,b)};MXStorable.prototype.delete=function(){this.deleted=Date.now()};MXStorable.loadAllItems=function(a,b){return Object.keys(window.localStorage).filter(function(a){return a.startsWith(b)}).map(function(b){return MXStorable.load(a,b)})};window.MXStorable=MXStorable;MXStorable.prototype.make=MXStorable.prototype.make;MXStorable.prototype.toJSON=MXStorable.prototype.toJSON;
MXStorable.prototype.load=MXStorable.prototype.load;MXStorable.prototype.store=MXStorable.prototype.store;MXStorable.prototype.storeObject=MXStorable.prototype.storeObject;MXStorable.prototype["delete"]=MXStorable.prototype.delete;MXStorable.prototype.loadAllItems=MXStorable.prototype.loadAllItems;var mxXHR=function(a,b){Model.call(this,null,"mxXhr",{uri:cI(a),xhr:cI(null)});b.send&&this.send(b.delay)};$jscomp.inherits(mxXHR,Model);mxXHR.cname=Model.cname;
mxXHR.prototype.send=function(a){var b=this,c=new XMLHttpRequest,d=function(){c.addEventListener("load",function(a){return b.xhr=a.target});c.addEventListener("abort",function(a){return b.xhr=a.target});c.addEventListener("error",function(a){return b.xhr=a.target});c.open("GET",b.uri);c.responseType="json";c.send()};a?setTimeout(d,a):d();return b};window.mxXHR=mxXHR;
function getXHR_JSON(a){clg("getXHR_JSON Sending request for ["+a+"]");goog.net.XhrIo.send(a,function(a){this.xhr=a.target;clg("getXHR_JSONxhr",xhr.getStatus(),xhr.isSuccess());xhr.isSuccess()?(a=xhr.getResponseJson(),clg("getXHR_JSONtotal AEs",a.meta.results.total)):clg("getXHR_JSONxhr last error",xhr.getLastError())})}
function testXHR(){var a=mkm(null,"testX",{lookup:cF(function(a){return new mxXHR("https://api.fda.gov/drug/event.json?search=patient.drug.openfda.brand_name:adderall&limit=3")}),result:cF(function(a){a=a.md.lookup;clg("result sees lookup",a,a.hunh,a.xhr);return a.xhr}),stuff:cF(function(a){if(a=a.md.result){if(a.isSuccess())return a=a.getResponseJson(),clg("total AEs!!!!!!",a.meta.results.total),a.meta.results.total+"AEs found";clg("xhr last error",a.getLastError());return"Error "+a.getLastError()}clg("No result!!!")})});
clg("sending!!!!!!!!!!!!",a.lookup.result);a.lookup.send();console.log("test result "+a.lookup.result)}function getabm(){clg("getabm!!!!!!!!!!!")}function xhraw(a){xhr=new XMLHttpRequest;xhr.addEventListener("load",function(a){clg("load",a.target.response);debugger});xhr.addEventListener("abort",function(a){return clg("abort",xhr==a.target)});xhr.addEventListener("error",function(a){return clg("error",xhr==a.target)});xhr.open("GET",a);xhr.responseType="json";xhr.send()};
